

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>depfinder &mdash; depfinder v1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="depfinder v1.0 documentation" href="#"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> depfinder
          

          
          </a>

          
            
            
              <div class="version">
                v1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">depfinder</a><ul>
<li><a class="reference internal" href="#using-depfinder">Using depfinder</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api">API</a></li>
<li><a class="reference internal" href="#ipython-jupyter-notebook-support">IPython/Jupyter Notebook support</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">depfinder</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li>depfinder</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>&lt;a href=&#8221;<a class="reference external" href="https://github.com/you">https://github.com/you</a>&#8220;&gt;&lt;img style=&#8221;position: absolute; top: 0; right: 0; border: 0;&#8221; src=&#8221;<a class="reference external" href="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67">https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67</a>&#8221; alt=&#8221;Fork me on GitHub&#8221; data-canonical-src=&#8221;<a class="reference external" href="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png">https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png</a>&#8220;&gt;&lt;/a&gt;</p>
<div class="section" id="depfinder">
<h1>depfinder<a class="headerlink" href="#depfinder" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://travis-ci.org/ericdill/depfinder"><img alt="https://travis-ci.org/ericdill/depfinder.svg?branch=master" src="https://travis-ci.org/ericdill/depfinder.svg?branch=master" /></a>
<a class="reference external image-reference" href="http://codecov.io/github/ericdill/depfinder?branch=master"><img alt="http://codecov.io/github/ericdill/depfinder/coverage.svg?branch=master" src="http://codecov.io/github/ericdill/depfinder/coverage.svg?branch=master" /></a>
<ul class="simple">
<li><a class="reference external" href="https://ericdill.github.io/depfinder">docs</a></li>
<li><a class="reference external" href="https://github.com/ericdill/depfinder">github repo</a></li>
</ul>
<div class="section" id="using-depfinder">
<h2>Using depfinder<a class="headerlink" href="#using-depfinder" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ depfinder -h
usage: depfinder [-h] [-y] [-V] [--no-remap] [-v] [-q] file_or_directory

Tool for inspecting the dependencies of your python project.

positional arguments:
  file_or_directory  Valid options are a single python file, a single jupyter
                     (ipython) notebook or a directory of files that include
                     python files

optional arguments:
  -h, --help         show this help message and exit
  -y, --yaml         Output in syntactically valid yaml when true. Defaults to
                     False
  -V, --version      Print out the version of depfinder and exit
  --no-remap         Do not remap the names of the imported libraries to their
                     proper conda name
  -v, --verbose      Enable debug level logging info from depfinder
  -q, --quiet        Turn off all logging from depfinder
</pre></div>
</div>
<p>Ok, great. That&#8217;s the help output.  Not super helpful.  What does the output of
depfinder look like when we run it on the source code for depfinder?</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ depfinder depfinder
{&#39;builtin&#39;: [&#39;__future__&#39;,
             &#39;argparse&#39;,
             &#39;ast&#39;,
             &#39;collections&#39;,
             &#39;copy&#39;,
             &#39;errno&#39;,
             &#39;json&#39;,
             &#39;logging&#39;,
             &#39;os&#39;,
             &#39;pprint&#39;,
             &#39;re&#39;,
             &#39;subprocess&#39;,
             &#39;sys&#39;],
 &#39;relative&#39;: [&#39;_version&#39;, &#39;main&#39;],
 &#39;required&#39;: [&#39;pyyaml&#39;, &#39;stdlib-list&#39;]}
</pre></div>
</div>
<p>So, what do these things mean?  Well <cite>builtin</cite> are modules that are built in to
the standard library.  <cite>required</cite> are modules that are not from the standard
library or from within the <cite>depfinder</cite> package and <cite>relative</cite> are modules that
are imported from one module to another within the <cite>depfinder</cite> source code.</p>
<p><a class="reference external" href="https://github.com/ericdill/depfinder/blob/master/depfinder_usage.ipynb">Also see this notebook</a></p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Find all the unique imports in your library, automatically, because who likes
do it by hand?  <a class="reference external" href="https://github.com/ericdill/depfinder">depfinder</a> uses the <a class="reference external" href="https://docs.python.org/2/library/ast.html">ast</a> (Abstract Syntax Tree) module
(and <a class="reference external" href="https://greentreesnakes.readthedocs.org/en/latest/">more ast docs</a>) to find
all <code class="xref py py-class docutils literal"><span class="pre">ast.Try</span></code> and <code class="xref py py-class docutils literal"><span class="pre">ast.ImportFrom</span></code> nodes.  These
<code class="xref py py-class docutils literal"><span class="pre">ast.Import</span></code> and <code class="xref py py-class docutils literal"><span class="pre">ast.ImportFrom</span></code> nodes are then grouped
according to the following categories, in order of decreasing precedence:</p>
<ul>
<li><dl class="first docutils">
<dt><strong>relative</strong></dt>
<dd><p class="first last">The import is a relative import from within the same library</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>builtin</strong></dt>
<dd><p class="first last">The import is built into the standard library, as determined by scraping the
official python docs for the builtins with <a class="reference external" href="https://github.com/jackmaney/python-stdlib-list">stdlib-list</a></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>questionable</strong></dt>
<dd><p class="first">The import occurs inside any combination of</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal"><span class="pre">ast.Try</span></code> (<code class="xref py py-class docutils literal"><span class="pre">ast.TryExcept</span></code> on py27)</li>
<li><code class="xref py py-class docutils literal"><span class="pre">ast.FunctionDef</span></code></li>
<li><code class="xref py py-class docutils literal"><span class="pre">ast.ClassDef</span></code></li>
</ul>
<p class="last">The module may be importable without these imports, but the it will likely
not have full functionality.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>required</strong></dt>
<dd><p class="first last">The import occurs at the top level of the module and will get executed
when the module is imported. These imports must be accounted for in an
environment, or the module will not be importable.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">depfinder</span></code> is on pypi. It is tested against Python 2.7, 3.3, 3.4 and 3.5.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">depfinder</span>
</pre></div>
</div>
<p>It is available via conda.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">ericdill</span> <span class="n">depfinder</span>
</pre></div>
</div>
<p>It is also via github.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">ericdill</span><span class="o">/</span><span class="n">depfinder</span>
<span class="n">cd</span> <span class="n">depfinder</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ericdill</span><span class="o">/</span><span class="n">depfinder</span><span class="o">/</span><span class="n">zipball</span><span class="o">/</span><span class="n">master</span><span class="c1">#egg=depfinder</span>
</pre></div>
</div>
<p>It has one dependency, <a class="reference external" href="https://github.com/jackmaney/python-stdlib-list">stdlib_list</a>, which is where I get the
list of libraries built in to the standard library. <code class="docutils literal"><span class="pre">stdlib-list</span></code> can be
installed via pip</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">stdlib</span><span class="o">-</span><span class="nb">list</span>
</pre></div>
</div>
<p>or conda</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">ericdill</span> <span class="n">stdlib</span><span class="o">-</span><span class="nb">list</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="depfinder.main.get_imported_libs">
<code class="descclassname">depfinder.main.</code><code class="descname">get_imported_libs</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/depfinder/main.html#get_imported_libs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#depfinder.main.get_imported_libs" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a code snippet, return a list of the imported libraries</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; The code to parse and look for imports</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The ImportCatcher is the object in <cite>depfinder</cite> that contains all the
information regarding which imports were found where.  You will most
likely be interested in calling the describe() function on this return
value.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ImportCatcher</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">depfinder</span><span class="o">.</span><span class="n">get_imported_libs</span><span class="p">(</span><span class="s1">&#39;from foo import bar&#39;</span><span class="p">)</span>
<span class="go">{&#39;required&#39;: {&#39;foo&#39;}, &#39;questionable&#39;: set()}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;depfinder.py&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="go">        code = f.read()</span>
<span class="go">        imports = depfinder.get_imported_libs(code)</span>
<span class="go">        print(imports.describe())</span>
<span class="go">{&#39;builtin&#39;: {&#39;__future__&#39;, &#39;json&#39;, &#39;ast&#39;, &#39;os&#39;, &#39;sys&#39;, &#39;collections&#39;},</span>
<span class="go"> &#39;required&#39;: {&#39;stdlib_list&#39;}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="depfinder.main.iterate_over_library">
<code class="descclassname">depfinder.main.</code><code class="descname">iterate_over_library</code><span class="sig-paren">(</span><em>path_to_source_code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/depfinder/main.html#iterate_over_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#depfinder.main.iterate_over_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to recurse into a library and find imports in .py files.</p>
<p>This allows the user to apply filters on the user-side to exclude imports
based on their file names.
<a class="reference external" href="https://github.com/ericdill/conda-skeletor">conda-skeletor</a>
makes heavy use of this function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_to_source_code</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><strong>catchers</strong> (<em>tuple</em>) &#8211; Yields tuples of (module_name, full_path_to_module, ImportCatcher)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="depfinder.main.simple_import_search">
<code class="descclassname">depfinder.main.</code><code class="descname">simple_import_search</code><span class="sig-paren">(</span><em>path_to_source_code</em>, <em>remap=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/depfinder/main.html#simple_import_search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#depfinder.main.simple_import_search" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all imported modules in all .py files in <cite>path_to_source_code</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path_to_source_code</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; </li>
<li><strong>remap</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#bool" title="(in Python v3.4)"><em>bool</em></a><em>, </em><em>optional</em>) &#8211; Normalize the import names to be synonymous with their conda/pip names</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The list of all imported modules, sorted according to the keys listed
in the docstring of depfinder.ImportCatcher.describe()</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#dict" title="(in Python v3.4)">dict</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">depfinder</span><span class="o">.</span><span class="n">simple_import_search</span><span class="p">(</span><span class="s1">&#39;/path/to/depfinder/source&#39;</span><span class="p">)</span>
<span class="go">{&#39;builtin&#39;: [&#39;__future__&#39;,</span>
<span class="go">             &#39;ast&#39;,</span>
<span class="go">             &#39;collections&#39;,</span>
<span class="go">             &#39;json&#39;,</span>
<span class="go">             &#39;os&#39;,</span>
<span class="go">             &#39;shlex&#39;,</span>
<span class="go">             &#39;sys&#39;,</span>
<span class="go">             &#39;tempfile&#39;],</span>
<span class="go"> &#39;required&#39;: [&#39;depfinder&#39;,</span>
<span class="go">              &#39;nbformat&#39;,</span>
<span class="go">              &#39;pytest&#39;,</span>
<span class="go">              &#39;setuptools&#39;,</span>
<span class="go">              &#39;sphinx_rtd_theme&#39;,</span>
<span class="go">              &#39;stdlib_list&#39;,</span>
<span class="go">              &#39;test_with_code&#39;]}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="ipython-jupyter-notebook-support">
<h1>IPython/Jupyter Notebook support<a class="headerlink" href="#ipython-jupyter-notebook-support" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal"><span class="pre">depfinder</span></code> has support for v4 Jupyter notebooks.</p>
<dl class="function">
<dt id="depfinder.main.notebook_path_to_dependencies">
<code class="descclassname">depfinder.main.</code><code class="descname">notebook_path_to_dependencies</code><span class="sig-paren">(</span><em>path_to_notebook</em>, <em>remap=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/depfinder/main.html#notebook_path_to_dependencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#depfinder.main.notebook_path_to_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function that turns a jupyter notebook into a list of dependencies</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path_to_notebook</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; </li>
<li><strong>remap</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#bool" title="(in Python v3.4)"><em>bool</em></a><em>, </em><em>optional</em>) &#8211; Normalize the import names to be synonymous with their conda/pip names</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>Dict of dependencies keyed on</p>
<ul class="simple">
<li>&#8216;builtin&#8217; - libraries built in to python</li>
<li>&#8216;required&#8217; - libraries that are found at the top level of your modules</li>
<li>&#8216;questionable&#8217; - libraries that are found inside try/except blocks</li>
<li>&#8216;relative&#8217; - libraries that are relative imports</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#dict" title="(in Python v3.4)">dict</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">depfinder</span><span class="o">.</span><span class="n">notebook_path_to_dependencies</span><span class="p">(</span><span class="s1">&#39;depfinder_usage.ipynb&#39;</span><span class="p">)</span>
<span class="go">{&#39;builtin&#39;: [&#39;os&#39;, &#39;pprint&#39;], &#39;required&#39;: [&#39;depfinder&#39;]}</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Eric Dill.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>